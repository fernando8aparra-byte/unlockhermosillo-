<!DOCTYPE html>
<html><body>
<h2>PRUEBA FINAL (30 segundos)</h2>
<button onclick="enviar()" style="padding:20px;font-size:20px;background:red;color:white;border:none;border-radius:15px;">
  ENVIAR DATO DE PRUEBA
</button>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.13.1/firebase-app.js";
import { getDatabase, ref, set } from "https://www.gstatic.com/firebasejs/10.13.1/firebase-database.js";

const app = initializeApp({
  databaseURL: "https://comprobantes-363c9-default-rtdb.firebaseio.com"
});

const db = getDatabase(app);

window.enviar = async () => {
  const btn = event.target;
  btn.textContent = "ENVIANDO...";
  try {
    await set(ref(db, 'test_' + Date.now()), {
      mensaje: "¡YA FUNCIONA!",
      hora: new Date().toLocaleString('es-MX')
    });
    btn.textContent = "¡FUNCIONÓ!";
    btn.style.background = "green";
    alert("¡ÉXITO! Ve a Firebase → verás un nodo que dice test_xxxxxx");
  } catch (e) {
    btn.textContent = "ERROR";
    btn.style.background = "black";
    alert("ERROR: " + e.message);
  }
}
</script>
</body></html>
