<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Desbloqueo tu iPhone</title>
    <!-- Fuentes -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap">
    <link rel="stylesheet" href="https://sf.abarba.me/SF.css">
    <!-- Iconos -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <!-- Firebase SDK -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.14.1/firebase-app.js";
        import { getStorage, ref, listAll, getDownloadURL } from "https://www.gstatic.com/firebasejs/10.14.1/firebase-storage.js";
        const firebaseConfig = {
            apiKey: "AIzaSyAt8TuulnlY3IKPaFVctgaGNQWewfzONEI",
            authDomain: "comprobantes-363c9.firebaseapp.com",
            databaseURL: "https://comprobantes-363c9-default-rtdb.firebaseio.com",
            projectId: "comprobantes-363c9",
            storageBucket: "comprobantes-363c9.firebasestorage.app",
            messagingSenderId: "390391998056",
            appId: "1:390391998056:web:23e22073d88bc247d43ddd",
            measurementId: "G-8W03RJD0TZ"
        };
        const app = initializeApp(firebaseConfig);
        const storage = getStorage(app);
        // Cargar slider principal
        async function loadMainSlider() {
            const folderRef = ref(storage, 'slider');
            const sliderInner = document.querySelector('#main-slider .slider-inner');
            try {
                const listResult = await listAll(folderRef);
                if (listResult.items.length === 0) {
                    sliderInner.innerHTML = '<div class="slider-item active"><div class="placeholder">No hay imÃ¡genes en el slider</div></div>';
                    return;
                }
                listResult.items.forEach((itemRef, index) => {
                    getDownloadURL(itemRef).then(url => {
                        const fileName = itemRef.name.toLowerCase();
                        const isVideo = fileName.endsWith('.mp4') || fileName.endsWith('.mov') || fileName.endsWith('.webm');
                        const div = document.createElement('div');
                        div.className = 'slider-item' + (index === 0 ? ' active' : '');
                        let content = isVideo
                            ? `<video src="${url}" autoplay muted loop playsinline></video>`
                            : `<img src="${url}" alt="Slider ${index + 1}" loading="lazy">`;
                        div.innerHTML = content;
                        sliderInner.appendChild(div);
                    });
                });
            } catch (error) {
                console.error("Error cargando slider:", error);
            }
        }
        // Cargar carruseles de trabajos recientes
        async function loadCarousel(folder, carouselId) {
            const folderRef = ref(storage, folder);
            const carouselInner = document.querySelector(`#${carouselId} .carousel-inner`);
            if (!carouselInner) return;
            carouselInner.innerHTML = '';
            try {
                const listResult = await listAll(folderRef);
                if (listResult.items.length === 0) {
                    carouselInner.innerHTML = '<div class="carousel-item active"><div class="fb-image-placeholder">No hay contenido disponible</div></div>';
                    return;
                }
                listResult.items.forEach((itemRef, index) => {
                    getDownloadURL(itemRef).then(url => {
                        const fileName = itemRef.name.toLowerCase();
                        const isVideo = fileName.endsWith('.mp4') || fileName.endsWith('.mov') || fileName.endsWith('.webm');
                        const div = document.createElement('div');
                        div.className = 'carousel-item' + (index === 0 ? ' active' : '');
                        let content = isVideo
                            ? `<video src="${url}" controls preload="metadata" playsinline></video>`
                            : `<img src="${url}" alt="Trabajo reciente" loading="lazy">`;
                        div.innerHTML = content;
                        carouselInner.appendChild(div);
                    }).catch(err => console.error('Error cargando media:', err));
                });
            } catch (error) {
                console.error("Error listando carpeta:", error);
            }
        }
        // Cargar imagen de perfil desde Firebase
        async function loadProfileImage() {
            const folderRef = ref(storage, 'perfil-fer');
            try {
                const listResult = await listAll(folderRef);
                if (listResult.items.length > 0) {
                    const firstItem = listResult.items[0];
                    const url = await getDownloadURL(firstItem);
                    document.querySelectorAll('.fb-post-profile-pic').forEach(pic => {
                        pic.style.backgroundImage = `url('${url}')`;
                    });
                }
            } catch (error) {
                console.error("Error cargando imagen de perfil:", error);
            }
        }
        // Cargar imagen iCloud para el botÃ³n
        async function loadICloudIcon() {
            const folderRef = ref(storage, 'iCloud');
            try {
                const listResult = await listAll(folderRef);
                if (listResult.items.length > 0) {
                    const firstItem = listResult.items[0];
                    const url = await getDownloadURL(firstItem);
                    document.getElementById('icloud-icon').src = url;
                }
            } catch (error) {
                console.error("Error cargando icono iCloud:", error);
            }
        }
        // Cargar imagen Paijoi para el botÃ³n
        async function loadPaijoiIcon() {
            const folderRef = ref(storage, 'payjoi');
            try {
                const listResult = await listAll(folderRef);
                if (listResult.items.length > 0) {
                    const firstItem = listResult.items[0];
                    const url = await getDownloadURL(firstItem);
                    document.getElementById('paijoi-icon').src = url;
                }
            } catch (error) {
                console.error("Error cargando icono Paijoi:", error);
            }
        }
        document.addEventListener('DOMContentLoaded', () => {
            const mainContent = document.getElementById('main-content');
            loadMainSlider();
            loadProfileImage();
            loadICloudIcon();
            loadPaijoiIcon();
            const observer = new MutationObserver(() => {
                if (mainContent.classList.contains('visible')) {
                    loadCarousel('ads-1', 'carousel-1');
                    loadCarousel('ads-2', 'carousel-2');
                    observer.disconnect();
                }
            });
            observer.observe(mainContent, { attributes: true, attributeFilter: ['class'] });
            if (mainContent.classList.contains('visible')) {
                loadCarousel('ads-1', 'carousel-1');
                loadCarousel('ads-2', 'carousel-2');
            }
            // Flechita guÃ­a primera vez
            if (!localStorage.getItem('guiaVista')) {
                document.getElementById('guia-flecha').classList.add('visible');
            }
            document.body.addEventListener('click', () => {
                document.getElementById('guia-flecha').classList.remove('visible');
                localStorage.setItem('guiaVista', 'true');
            }, { once: true });
            window.addEventListener('scroll', () => {
                if (window.scrollY > 200) {
                    document.getElementById('guia-flecha').classList.remove('visible');
                    localStorage.setItem('guiaVista', 'true');
                }
            });
        });
    </script>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'SF Pro Text', 'SF Pro Display', 'Helvetica Neue', Helvetica, Arial, sans-serif;
            background-color: #f5f5f7;
            color: #1d1d1f;
            overflow-x: hidden;
        }
        /* Header fijo */
        header {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            background: rgba(255,255,255,0.95);
            backdrop-filter: blur(10px);
            z-index: 1000;
            padding: 20px 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .hamburger {
            position: absolute;
            left: 20px;
            font-size: 28px;
            color: #1d1d1f;
            cursor: pointer;
        }
        .header-title {
            font-size: 24px;
            font-weight: 700;
            color: #1d1d1f;
        }
        /* MenÃº lateral */
        #side-menu {
            position: fixed;
            top: 0;
            left: -250px;
            width: 250px;
            height: 100%;
            background: white;
            box-shadow: 2px 0 10px rgba(0,0,0,0.2);
            transition: left 0.3s ease;
            z-index: 1100;
            padding-top: 20px;
        }
        #side-menu.active {
            left: 0;
        }
        .menu-close {
            position: absolute;
            top: 15px;
            right: 20px;
            font-size: 28px;
            color: #1d1d1f;
            cursor: pointer;
        }
        .menu-items {
            padding-top: 60px;
        }
        .menu-item {
            display: block;
            padding: 15px 20px;
            font-size: 18px;
            font-weight: 600;
            color: #1d1d1f;
            text-decoration: none;
            border-bottom: 1px solid #eee;
        }
        .menu-item:last-child {
            border-bottom: none;
        }
        /* NavegaciÃ³n ovalada */
        .nav-oval {
            display: flex;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
            padding: 20px;
            margin-top: 80px;
        }
        .nav-item {
            background: white;
            padding: 12px 28px;
            border-radius: 50px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            white-space: nowrap;
        }
        .nav-item:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.15);
        }
        /* Iconos arriba de las islas */
        .service-island {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
        }
        .service-icon {
            width: 80px;
            height: 80px;
            object-fit: contain;
            margin-bottom: 12px;
        }
        /* Para Paijoi especÃ­ficamente: asegurar que se vea completa */
        #paijoi-icon {
            object-fit: contain;
        }
        .fa-users-service {
            font-size: 80px;
            color: #1d1d1f;
            margin-bottom: 12px;
        }
        /* FAQ accordion - disposiciÃ³n en ladrillo (una debajo de otra) */
        .faq-container {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-top: 20px;
        }
        .faq-item {
            background: white;
            padding: 16px 24px;
            border-radius: 50px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            font-weight: 600;
        }
        .faq-item.active {
            border-bottom-left-radius: 0;
            border-bottom-right-radius: 0;
            margin-bottom: 0;
        }
        .faq-answer {
            background: white;
            padding: 20px 24px;
            border-radius: 0 0 18px 18px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
            margin-top: -10px;
            display: none;
        }
        .faq-answer.visible {
            display: block;
        }
        /* Slider principal */
        #main-slider {
            width: 100%;
            overflow: hidden;
            position: relative;
            margin: 40px 0;
        }
        .slider-inner {
            display: flex;
            transition: transform 0.6s ease;
        }
        .slider-item {
            min-width: 100%;
            position: relative;
        }
        .slider-item img, .slider-item video {
            width: 100%;
            height: auto;
            max-height: 80vh;
            object-fit: contain;
            display: block;
        }
        @media (max-width: 767px) {
            .slider-item img, .slider-item video {
                max-height: 60vh;
            }
        }
        /* Trabajos recientes */
        #preview .posts-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 40px;
            margin-bottom: 60px;
            padding: 0 10px;
        }
        @media (min-width: 768px) {
            #preview .posts-grid {
                grid-template-columns: 1fr 1fr;
                padding: 0;
            }
        }
        .fb-post-container {
            background: white;
            border-radius: 18px;
            overflow: hidden;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
        }
        .fb-post-container:hover {
            transform: translateY(-6px);
            box-shadow: 0 16px 40px rgba(0,0,0,0.15);
        }
        .fb-post-header {
            display: flex;
            align-items: center;
            padding: 12px 16px;
            cursor: pointer;
        }
        .fb-post-profile-pic {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            background-size: cover;
            background-position: center;
            margin-right: 12px;
        }
        .fb-post-name-time {
            flex: 1;
        }
        .fb-post-name {
            font-weight: 600;
            font-size: 15px;
            color: #1c1e21;
        }
        .fb-post-time {
            font-size: 13px;
            color: #65676b;
        }
        .fb-post-content {
            padding: 0 16px 12px;
            font-size: 15px;
            color: #1c1e21;
            line-height: 1.5;
        }
        .carousel-container {
            position: relative;
            width: 100%;
            height: 0;
            padding-top: 100%;
            background: black;
            overflow: hidden;
        }
        @media (min-width: 768px) {
            .carousel-container {
                padding-top: 80%;
            }
        }
        .carousel-inner {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            transition: transform 0.5s ease;
        }
        .carousel-item {
            min-width: 100%;
            height: 100%;
            position: relative;
        }
        .carousel-item img, .carousel-item video {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
        }
        /* Flechita guÃ­a */
        #guia-flecha {
            position: absolute;
            top: 50%;
            left: 20px;
            transform: translateY(-50%);
            background: #1d1d1f;
            color: white;
            padding: 15px 20px;
            border-radius: 50px;
            font-weight: 600;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.5s ease;
            z-index: 10;
        }
        #guia-flecha::after {
            content: '';
            position: absolute;
            top: 50%;
            right: -15px;
            transform: translateY(-50%) rotate(45deg);
            width: 20px;
            height: 20px;
            background: #1d1d1f;
        }
        #guia-flecha.visible {
            opacity: 1;
        }
        section { padding: 60px 20px; max-width: 1200px; margin: 0 auto; }
        h2 { text-align: center; font-size: 32px; margin-bottom: 40px; }
        #servicios, #faq {
            background: white;
            padding: 40px;
            border-radius: 18px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
            margin-bottom: 40px;
        }
        .cta-container { text-align: center; margin: 60px 0; }
        .cta-button {
            background: #1d1d1f;
            color: white;
            padding: 20px 56px;
            font-size: 26px;
            font-weight: 600;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            transition: all 0.3s ease;
        }
        .cta-button:hover { background: #000; transform: translateY(-3px); }
        /* TÃ©rminos */
        #terms-screen {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(255,255,255,0.95);
            backdrop-filter: blur(20px);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 2000;
        }
        #terms-screen.hidden { display: none; }
        .terms-card {
            background: white;
            padding: 40px;
            border-radius: 18px;
            max-width: 600px;
            width: 90%;
            box-shadow: 0 8px 32px rgba(0,0,0,0.12);
            text-align: center;
        }
        /* Modales de servicios */
        .service-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255,255,255,0.95);
            backdrop-filter: blur(10px);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1200;
            padding: 20px;
            overflow-y: auto;
        }
        .service-modal.active {
            display: flex;
        }
        .service-content {
            background: white;
            padding: 40px;
            border-radius: 18px;
            max-width: 800px;
            width: 100%;
            box-shadow: 0 8px 32px rgba(0,0,0,0.12);
            position: relative;
            text-align: center;
        }
        .modal-close {
            position: absolute;
            top: 15px;
            right: 20px;
            font-size: 28px;
            color: #1d1d1f;
            cursor: pointer;
        }
        main { margin-top: 80px; }
    </style>
</head>
<body>
    <!-- Header fijo -->
    <header>
        <div class="hamburger" id="hamburger">â˜°</div>
        <div class="header-title">Desbloqueo tu iPhone</div>
    </header>
    <!-- MenÃº lateral -->
    <nav id="side-menu">
        <div class="menu-close" id="menu-close">Ã—</div>
        <div class="menu-items">
            <a href="nosotros.html" class="menu-item">Nosotros</a>
            <a href="#servicios" class="menu-item">Servicios</a>
            <a href="#preview" class="menu-item">ReseÃ±as</a>
            <a href="#faq" class="menu-item">Preguntas frecuentes</a>
            <a href="login.html" class="menu-item">Iniciar sesiÃ³n</a>
        </div>
    </nav>
    <!-- TÃ©rminos primera vez -->
    <div id="terms-screen">
        <div class="terms-card">
            <h2>TÃ©rminos y Condiciones</h2>
            <p>Al utilizar este servicio, usted declara que:</p>
            <ul style="text-align:left;">
                <li>El telÃ©fono iPhone es de su propiedad exclusiva.</li>
                <li>Entiende que cualquier procedimiento conlleva riesgos.</li>
                <li>El tÃ©cnico no se responsabiliza por daÃ±os o pÃ©rdida de datos.</li>
                <li>Usted asume completa responsabilidad.</li>
            </ul>
            <div style="margin:20px 0;">
                <input type="checkbox" id="accept-checkbox">
                <label for="accept-checkbox">Acepto los tÃ©rminos y condiciones</label>
            </div>
            <button id="accept-btn" disabled>Aceptar y continuar</button>
        </div>
    </div>
    <!-- NavegaciÃ³n ovalada superior -->
    <div class="nav-oval">
        <div class="nav-item" onclick="window.location.href='nosotros.html'">Nosotros</div>
        <div class="nav-item" onclick="document.getElementById('servicios').scrollIntoView({behavior:'smooth'})">Servicios</div>
        <div class="nav-item" onclick="document.getElementById('preview').scrollIntoView({behavior:'smooth'})">ReseÃ±as</div>
        <div class="nav-item" onclick="document.getElementById('faq').scrollIntoView({behavior:'smooth'})">Preguntas frecuentes</div>
    </div>
    <!-- Slider principal -->
    <div id="main-slider">
        <div class="slider-inner"></div>
    </div>
    <main id="main-content">
        <!-- Trabajos recientes -->
        <section id="preview" style="position:relative;">
            <div id="guia-flecha">Mira el proceso de desbloqueo aquÃ­ â†’</div>
            <h2>Trabajos recientes</h2>
            <div class="posts-grid">
                <div class="fb-post-container">
                    <div class="fb-post-header" onclick="window.open('https://www.instagram.com/ferv_hs', '_blank')">
                        <div class="fb-post-profile-pic"></div>
                        <div class="fb-post-name-time">
                            <div class="fb-post-name">ferv_hs</div>
                            <div class="fb-post-time">Trabajo reciente</div>
                        </div>
                    </div>
                    <div class="fb-post-content">Â¡Otro iPhone desbloqueado con Ã©xito! Cliente feliz y listo para usar su dispositivo ðŸš€</div>
                    <div class="carousel-container" id="carousel-1">
                        <div class="carousel-inner"></div>
                    </div>
                </div>
                <div class="fb-post-container">
                    <div class="fb-post-header" onclick="window.open('https://www.instagram.com/ferv_hs', '_blank')">
                        <div class="fb-post-profile-pic"></div>
                        <div class="fb-post-name-time">
                            <div class="fb-post-name">ferv_hs</div>
                            <div class="fb-post-time">Trabajo reciente</div>
                        </div>
                    </div>
                    <div class="fb-post-content">Â¡Otro iPhone desbloqueado con Ã©xito! Cliente feliz y listo para usar su dispositivo ðŸš€</div>
                    <div class="carousel-container" id="carousel-2">
                        <div class="carousel-inner"></div>
                    </div>
                </div>
            </div>
        </section>
        <!-- Servicios -->
        <section id="servicios">
            <h2>Servicios</h2>
            <div class="nav-oval" style="justify-content: center; gap: 30px; flex-wrap: wrap;">
                <div class="service-island nav-item" onclick="toggleServiceModal('icloud')">
                    <img id="icloud-icon" class="service-icon" src="" alt="Desbloqueo iCloud">
                    <div>Desbloqueo iCloud</div>
                </div>
                <div class="service-island nav-item" onclick="toggleServiceModal('paijoi')">
                    <img id="paijoi-icon" class="service-icon" src="" alt="Desbloqueo Paijoi">
                    <div>Desbloqueo Paijoi</div>
                </div>
                <div class="service-island nav-item" onclick="window.location.href='curriculum.html'">
                    <i class="fas fa-users fa-users-service"></i>
                    <div>Quiero ser socio</div>
                </div>
            </div>
        </section>
        <!-- Preguntas frecuentes (disposiciÃ³n vertical tipo ladrillo) -->
        <section id="faq">
            <h2>Preguntas frecuentes</h2>
            <div class="faq-container">
                <div class="faq-item" onclick="toggleFaq('garantia')">Â¿Tiene garantÃ­a?</div>
                <div class="faq-answer" id="garantia-answer">
                    <p>InformaciÃ³n sobre la garantÃ­a del servicio...</p>
                </div>

                <div class="faq-item" onclick="toggleFaq('estado')">Â¿CÃ³mo va a quedar mi telÃ©fono?</div>
                <div class="faq-answer" id="estado-answer">
                    <p>InformaciÃ³n sobre el estado final del dispositivo...</p>
                </div>

                <div class="faq-item" onclick="toggleFaq('compatible')">Â¿Mi telÃ©fono es compatible?</div>
                <div class="faq-answer" id="compatible-answer">
                    <p>InformaciÃ³n sobre compatibilidad...</p>
                </div>

                <div class="faq-item" onclick="toggleFaq('funciona')">Â¿CÃ³mo funciona el desbloqueo?</div>
                <div class="faq-answer" id="funciona-answer">
                    <p>ExplicaciÃ³n paso a paso del proceso...</p>
                </div>

                <div class="faq-item" onclick="toggleFaq('otros')">Â¿QuÃ© otros servicios ofrecen?</div>
                <div class="faq-answer" id="otros-answer">
                    <p>Lista de otros servicios disponibles...</p>
                </div>
            </div>
        </section>
        <!-- BotÃ³n CTA -->
        <div class="cta-container">
            <button class="cta-button" onclick="window.location.href='crea-cita.html'">Â¡Agenda ahora tu desbloqueo!</button>
        </div>
    </main>
    <!-- Modales de servicios -->
    <div id="icloud-modal" class="service-modal">
        <div class="service-content">
            <div class="modal-close" onclick="toggleServiceModal('icloud')">Ã—</div>
            <h2>Desbloqueo iCloud</h2>
            <div class="service-text">
                <p>InformaciÃ³n detallada sobre el desbloqueo iCloud...</p>
            </div>
        </div>
    </div>
    <div id="paijoi-modal" class="service-modal">
        <div class="service-content">
            <div class="modal-close" onclick="toggleServiceModal('paijoi')">Ã—</div>
            <h2>Desbloqueo Paijoi</h2>
            <div class="service-text">
                <p>InformaciÃ³n detallada sobre el desbloqueo Paijoi...</p>
            </div>
        </div>
    </div>
    <script>
        // TÃ©rminos y menÃº
        const termsScreen = document.getElementById('terms-screen');
        const checkbox = document.getElementById('accept-checkbox');
        const acceptBtn = document.getElementById('accept-btn');
        const mainContent = document.getElementById('main-content');
        const hamburger = document.getElementById('hamburger');
        const sideMenu = document.getElementById('side-menu');
        const menuClose = document.getElementById('menu-close');
        if (localStorage.getItem('termsAccepted') === 'true') {
            termsScreen.classList.add('hidden');
            mainContent.classList.add('visible');
        }
        checkbox.addEventListener('change', () => acceptBtn.disabled = !checkbox.checked);
        acceptBtn.addEventListener('click', () => {
            if (checkbox.checked) {
                localStorage.setItem('termsAccepted', 'true');
                termsScreen.classList.add('hidden');
                setTimeout(() => mainContent.classList.add('visible'), 300);
            }
        });
        hamburger.addEventListener('click', () => sideMenu.classList.add('active'));
        menuClose.addEventListener('click', () => sideMenu.classList.remove('active'));
        // Swipe en carruseles
        document.querySelectorAll('.carousel-container').forEach(container => {
            let touchStartX = 0, currentIndex = 0;
            const inner = container.querySelector('.carousel-inner');
            const getItems = () => inner.querySelectorAll('.carousel-item');
            const update = () => inner.style.transform = `translateX(-${currentIndex * 100}%)`;
            container.addEventListener('touchstart', e => touchStartX = e.touches[0].screenX, { passive: true });
            container.addEventListener('touchend', e => {
                const diff = touchStartX - e.changedTouches[0].screenX;
                if (Math.abs(diff) > 50 && getItems().length > 1) {
                    currentIndex = diff > 0 ? (currentIndex + 1) % getItems().length : (currentIndex - 1 + getItems().length) % getItems().length;
                    update();
                }
            }, { passive: true });
        });
        // FunciÃ³n para togglear modales de servicios
        let activeModal = null;
        function toggleServiceModal(service) {
            const modal = document.getElementById(`${service}-modal`);
            if (activeModal && activeModal !== modal) {
                activeModal.classList.remove('active');
            }
            if (modal.classList.contains('active')) {
                modal.classList.remove('active');
                activeModal = null;
            } else {
                modal.classList.add('active');
                activeModal = modal;
            }
        }
        // FAQ accordion
        let activeFaq = null;
        function toggleFaq(id) {
            const answer = document.getElementById(id + '-answer');
            const item = answer.previousElementSibling;
            if (activeFaq && activeFaq !== answer) {
                activeFaq.classList.remove('visible');
                activeFaq.previousElementSibling.classList.remove('active');
            }
            if (answer.classList.contains('visible')) {
                answer.classList.remove('visible');
                item.classList.remove('active');
                activeFaq = null;
            } else {
                answer.classList.add('visible');
                item.classList.add('active');
                activeFaq = answer;
            }
        }
        // Cerrar FAQ al hacer click fuera
        document.addEventListener('click', (e) => {
            if (activeFaq && !e.target.closest('.faq-item') && !e.target.closest('.faq-answer')) {
                activeFaq.classList.remove('visible');
                activeFaq.previousElementSibling.classList.remove('active');
                activeFaq = null;
            }
        });
    </script>
</body>
</html>
